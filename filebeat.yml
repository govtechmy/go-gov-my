output:
  elasticsearch:
    hosts: ["http://elasticsearch:9200"]
    pipelines:
      # This pipeline is created in the init-elasticsearch.sh script
      # It processes and stores the redirectMetadata logs from redirectd
      - pipeline: redirect_metadata_pipeline
        when:
          has_fields: ["json.redirectMetadata"]

filebeat:
  inputs:
    - type: filestream
      id: redirect-server-filestream
      paths:
        - /usr/share/filebeat/logs/*
      parsers:
        - ndjson:
            add_error_key: true
